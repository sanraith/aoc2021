!function(){"use strict";var t={5020:function(t,n,e){var r,i=e(7762),a=e(5861),o=e(7757),u=e.n(o),s=e(1435),c=e(9591),l=e(5671),f=e(3144),h=e(136),p=e(9388),v=e(763),d=e.n(v),g=e(874),y=e(6043),m=function t(n,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;(0,l.Z)(this,t),this.part=n,this.progress=e,this.timeMs=r,this.kind="progress"},k=function t(n,e,r,i){(0,l.Z)(this,t),this.part=n,this.result=e,this.timeMs=r,this.visualizationData=i,this.kind="result"},w=function t(n,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;(0,l.Z)(this,t),this.part=n,this.message=e,this.timeMs=r,this.kind="error"},b=function(){function t(){(0,l.Z)(this,t),this.minTimeBetweenUpdatesMs=20,this.visualizationData=void 0,this._input=void 0,this._inputLines=void 0,this.currentSolution=void 0}return(0,f.Z)(t,[{key:"input",get:function(){var t;return null!==(t=this._input)&&void 0!==t?t:""}},{key:"inputLines",get:function(){return void 0===this._inputLines&&(this._inputLines=this.parseInputLines(this.input)),this._inputLines}},{key:"init",value:function(t){return this._input=t,this}},{key:"solveAsync",value:function(){var t=(0,a.Z)(u().mark((function t(n){var e;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,s.n)(this.solveWithProgress(n));case 2:e=t.sent,t.t0=e.kind,t.next="result"===t.t0?6:7;break;case 6:return t.abrupt("return",e.result);case 7:return t.abrupt("return",null);case 8:case"end":return t.stop()}}),t,this)})));return function(n){return t.apply(this,arguments)}}()},{key:"solveWithProgress",value:function(t){var n=this;return new g.y((function(e){if(n._input)if(n.currentSolution)e.error(new w(t,"Another solution is already in progress!"));else{var r=1===t?n.part1:n.part2;n.currentSolution={activePart:t,subscriber:e,stopwatch:new y.u,progressStopwatch:new y.u},n.visualizationData=null,n.currentSolution.stopwatch.start(),n.currentSolution.progressStopwatch.start();try{var i=r.apply(n)+"",a=n.currentSolution.stopwatch.stop(),o=new k(t,i,a,n.visualizationData);e.next(o)}catch(c){var u,s=null!==(u=n.currentSolution.stopwatch.stop())&&void 0!==u?u:0;e.next(new w(t,c+"",s))}finally{e.complete(),n.visualizationData=null,n.currentSolution=void 0}}else e.error(new w(t,"No input provided!"))}))}},{key:"updateProgress",value:function(t){var n=this.currentSolution;n&&n.progressStopwatch.getTime()>this.minTimeBetweenUpdatesMs&&(n.subscriber.next(new m(n.activePart,t,n.stopwatch.getTime())),n.progressStopwatch.start(!0))}},{key:"noSolution",value:function(t){throw new Error(t)}},{key:"parseInputLines",value:function(t){var n,e=t.split(/\r\n?|\n/g),r=/^\s*$/gm;for(n=0;n<e.length;n++){var i=e[e.length-n-1];if(!r.test(i))break}return e.splice(e.length-n,n),e}}]),t}(),Z=e(1413),x=[];function S(){var t="number"===typeof(arguments.length<=0?void 0:arguments[0])?{day:arguments.length<=0?void 0:arguments[0],title:arguments.length<=1?void 0:arguments[1]}:arguments.length<=0?void 0:arguments[0];return function(n){x.push((0,Z.Z)((0,Z.Z)({},t),{},{ctor:n,create:function(){return new n}}))}}S({day:1,title:"Report Repair"})(r=function(t){(0,h.Z)(e,t);var n=(0,p.Z)(e);function e(){var t;(0,l.Z)(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(t=n.call.apply(n,[this].concat(i))).visualizationData=void 0,t}return(0,f.Z)(e,[{key:"part1",value:function(){for(var t=[],n=this.inputLines.map((function(t){return(0,v.toInteger)(t)})),e=0;e<n.length;e++)for(var r=n[e],i=e+1;i<n.length;i++){var a=n[i];if(t.push(e,i),r+a===2020)return this.visualizationData={numbers:n,i:e,j:i,checks:t},r*a}this.noSolution()}},{key:"part2",value:function(){for(var t=[],n=this.inputLines.map((function(t){return(0,v.toInteger)(t)})),e=0;e<n.length;e++)for(var r=n[e],i=e+1;i<n.length;i++)for(var a=n[i],o=i+1;o<n.length;o++){var u=n[o];t.push(e,i,o);for(var s=0;s<1e3;s++);if(r+a+u===2020)return this.visualizationData={numbers:n,i:e,j:i,k:o,checks:t},r*a*u}this.noSolution()}}]),e}(b));var L,P,j,D,E,I=e(3324),V=(S({day:2,title:"Password Philosophy"})(L=function(t){(0,h.Z)(e,t);var n=(0,p.Z)(e);function e(){var t;(0,l.Z)(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(t=n.call.apply(n,[this].concat(i))).regex=/([0-9]+)-([0-9]+) ([a-z]): ([a-z]+)/g,t}return(0,f.Z)(e,[{key:"part1",value:function(){for(var t,n=0;t=this.regex.exec(this.input);){var e=t,r=(0,I.Z)(e,5),i=r[1],a=r[2],o=r[3],u=r[4].split(o).length-1;u>=parseInt(i)&&u<=parseInt(a)&&n++}return n}},{key:"part2",value:function(){for(var t,n=0;t=this.regex.exec(this.input);){var e=t,r=(0,I.Z)(e,5),i=r[1],a=r[2],o=r[3],u=r[4];u[parseInt(i)-1]===o!==(u[parseInt(a)-1]===o)&&n++}return n}}]),e}(b)),S({day:3,title:"Toboggan Trajectory"})(P=function(t){(0,h.Z)(e,t);var n=(0,p.Z)(e);function e(){return(0,l.Z)(this,e),n.apply(this,arguments)}return(0,f.Z)(e,[{key:"part1",value:function(){return this.getTreeCount({x:3,y:1})}},{key:"part2",value:function(){var t=this;return[[1,1],[3,1],[5,1],[7,1],[1,2]].map((function(t){return{x:t[0],y:t[1]}})).map((function(n){return t.getTreeCount(n)})).reduce((function(t,n){return t*n}),1)}},{key:"getTreeCount",value:function(t){for(var n=this.inputLines,e=n[0].length,r=n.length,i={x:0,y:0},a=0;i.y<r;){"#"===n[i.y][i.x%e]&&a++,i=this.add(i,t)}return a}},{key:"add",value:function(t,n){return{x:t.x+n.x,y:t.y+n.y}}}]),e}(b)),S({day:4,title:"Passport Processing"})(j=function(t){(0,h.Z)(e,t);var n=(0,p.Z)(e);function e(){var t;(0,l.Z)(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(t=n.call.apply(n,[this].concat(i))).fieldValidators=[["byr",t.createYearValidator(1920,2002)],["iyr",t.createYearValidator(2010,2020)],["eyr",t.createYearValidator(2020,2030)],["hgt",t.heightValidator],["hcl",function(t){return/^#[0-9a-f]{6}$/g.test(t)}],["ecl",function(t){return/^(amb|blu|brn|gry|grn|hzl|oth)$/g.test(t)}],["pid",t.createNumberValidator(9)]].map((function(t){return{field:t[0],validate:t[1]}})),t}return(0,f.Z)(e,[{key:"part1",value:function(){var t=this;return this.getPassports().filter((function(n){return t.fieldValidators.every((function(t){return n.has(t.field)}))})).length}},{key:"part2",value:function(){var t=this;return this.getPassports().filter((function(n){return t.fieldValidators.every((function(t){return n.has(t.field)}))})).filter((function(n){return t.fieldValidators.every((function(t){return t.validate(n.get(t.field))}))})).length}},{key:"createNumberValidator",value:function(t){return function(n){return new RegExp("^[0-9]{".concat(t,"}$")).test(n)}}},{key:"createYearValidator",value:function(t,n){var e=this.createNumberValidator(4);return function(r){if(!e(r))return!1;var i=parseInt(r);return i>=t&&i<=n}}},{key:"heightValidator",value:function(t){var n=/^([0-9]+)(?:cm|in)$/;if(!n.test(t))return!1;var e=parseInt(n.exec(t)[1]);return t.indexOf("cm")>=0?e>=150&&e<=193:e>=59&&e<=76}},{key:"getPassports",value:function(){var t,n=/([a-z]{3}):(\S+)/g,e=this.input.split(/\r\n\r\n|\n\n/g),r=[],a=(0,i.Z)(e);try{for(a.s();!(t=a.n()).done;){for(var o=t.value,u=new Map,s=void 0;s=n.exec(o);){var c=s,l=(0,I.Z)(c,3),f=l[1],h=l[2];u.set(f,h)}r.push(u)}}catch(p){a.e(p)}finally{a.f()}return r}}]),e}(b)),S({day:5,title:"Binary Boarding"})(D=function(t){(0,h.Z)(e,t);var n=(0,p.Z)(e);function e(){return(0,l.Z)(this,e),n.apply(this,arguments)}return(0,f.Z)(e,[{key:"part1",value:function(){var t=this;return d()(this.inputLines).map((function(n){return t.decode(n).id})).max()}},{key:"part2",value:function(){var t,n=this,e=new Map(this.inputLines.map((function(t){return n.decode(t)})).map((function(t){return[t.id,t]}))),r=(0,i.Z)(e.values());try{for(r.s();!(t=r.n()).done;){var a=t.value;if(!e.has(a.id+1)&&e.has(a.id+2))return a.id+1}}catch(o){r.e(o)}finally{r.f()}this.noSolution()}},{key:"decode",value:function(t){var n=t.slice(0,7),e=t.slice(7,10),r=n.replace(/F/g,"0").replace(/B/g,"1"),i=e.replace(/L/g,"0").replace(/R/g,"1"),a=parseInt(r,2),o=parseInt(i,2);return{row:a,column:o,id:8*a+o}}}]),e}(b)),S({day:22,title:"Crab Combat"})(E=function(t){(0,h.Z)(e,t);var n=(0,p.Z)(e);function e(){var t;(0,l.Z)(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(t=n.call.apply(n,[this].concat(i))).isLogEnabled=!1,t.gameCount=void 0,t}return(0,f.Z)(e,[{key:"part1",value:function(){var t=this.parseDecks();return this.playGame(t,{isRecursive:!1}),this.part2(),this.calculateScore(t)}},{key:"part2",value:function(){var t=this.parseDecks();return this.playGame(t,{isRecursive:!0}),this.calculateScore(t)}},{key:"calculateScore",value:function(t){return t.filter((function(t){return t.length>0}))[0].reverse().reduce((function(t,n,e){return t+n*(e+1)}),0)}},{key:"playGame",value:function(t,n){var e=this,r=new Set,i=++this.gameCount,a=0;this.isLogEnabled&&console.log("\n== Game ".concat(i," =="));for(var o=function(){a++,1===i&&e.updateProgress(Math.max(t[0].length,t[1].length)/(t[0].length+t[1].length)),e.isLogEnabled&&(console.log("\n-- Round ".concat(a," (Game ").concat(i,") --")),t.forEach((function(t,n){return console.log("Player ".concat(n+1,"'s deck: ").concat(t.join(", ")))})));var o=e.getState(t);if(r.has(o))return{v:0};r.add(o);var u=t.map((function(t){return t.shift()})),s=(0,I.Z)(u,2),c=s[0],l=s[1];e.isLogEnabled&&u.forEach((function(t,n){return console.log("Player ".concat(n+1," plays: ").concat(t))}));var f=c>l?0:1;if(n.isRecursive&&t[0].length>=c&&t[1].length>=l){e.isLogEnabled&&console.log("Playing a sub-game to determine a winner...");var h=t.map((function(t,n){return t.slice(0,u[n])}));f=e.playGame(h,n),e.isLogEnabled&&console.log("\n...anyway, back to game ".concat(i,"."))}0===f?t[0].push(c,l):t[1].push(l,c),e.isLogEnabled&&console.log("Player ".concat(f+1," wins round ").concat(a," of game ").concat(i,"!"))};t[0].length>0&&t[1].length>0;){var u=o();if("object"===typeof u)return u.v}var s=t.findIndex((function(t){return t.length>0}));return this.isLogEnabled&&(console.log("The winner of game ".concat(i," is player ").concat(s+1,"!")),1===i&&(console.log("\n\n== Post-game results =="),t.forEach((function(t,n){return console.log("Player ".concat(n+1,"'s deck: ").concat(t.join(", ")))})))),s}},{key:"getState",value:function(t){return t[0].join(",")+"|"+t[1].join(",")}},{key:"parseDecks",value:function(){for(var t,n=[],e=0,r=0;r<2;r++){e++;for(var i=[];(t=this.inputLines[e++])&&t.length>0;)i.push(parseInt(t));n.push(i)}return this.gameCount=0,n}}]),e}(b)),(new(function(){function t(){(0,l.Z)(this,t)}return(0,f.Z)(t,[{key:"getSolutionsByDay",value:function(){return new Map(x.map((function(t){return[t.day,t]})))}},{key:"getSolutions",value:function(){return Array.from(this.getSolutionsByDay().values()).sort((function(t,n){return t.day-n.day}))}}]),t}())).getSolutionsByDay());addEventListener("message",function(){var t=(0,a.Z)(u().mark((function t(n){var e,r,a,o,l,f,h;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=n.data,r=V.get(e.day)){t.next=4;break}return t.abrupt("return");case 4:(a=r.create()).init(e.input),o=(0,i.Z)([1,2]),t.prev=7,o.s();case 9:if((l=o.n()).done){t.next=16;break}return f=l.value,h=a.solveWithProgress(f),t.next=14,(0,s.n)(h.pipe((0,c.b)((function(t){return postMessage(t)}))));case 14:t.next=9;break;case 16:t.next=21;break;case 18:t.prev=18,t.t0=t.catch(7),o.e(t.t0);case 21:return t.prev=21,o.f(),t.finish(21);case 24:postMessage(new k(-1,null,0));case 25:case"end":return t.stop()}}),t,null,[[7,18,21,24]])})));return function(n){return t.apply(this,arguments)}}())}},n={};function e(r){var i=n[r];if(void 0!==i)return i.exports;var a=n[r]={id:r,loaded:!1,exports:{}};return t[r].call(a.exports,a,a.exports,e),a.loaded=!0,a.exports}e.m=t,e.x=function(){var t=e.O(void 0,[480],(function(){return e(5020)}));return t=e.O(t)},function(){var t=[];e.O=function(n,r,i,a){if(!r){var o=1/0;for(l=0;l<t.length;l++){r=t[l][0],i=t[l][1],a=t[l][2];for(var u=!0,s=0;s<r.length;s++)(!1&a||o>=a)&&Object.keys(e.O).every((function(t){return e.O[t](r[s])}))?r.splice(s--,1):(u=!1,a<o&&(o=a));if(u){t.splice(l--,1);var c=i();void 0!==c&&(n=c)}}return n}a=a||0;for(var l=t.length;l>0&&t[l-1][2]>a;l--)t[l]=t[l-1];t[l]=[r,i,a]}}(),e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,{a:n}),n},e.d=function(t,n){for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},e.f={},e.e=function(t){return Promise.all(Object.keys(e.f).reduce((function(n,r){return e.f[r](t,n),n}),[]))},e.u=function(t){return"static/js/"+t+".401139d8.chunk.js"},e.miniCssF=function(t){},e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}(),e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t},e.p="/aoc2021/",function(){var t={20:1};e.f.i=function(n,r){t[n]||importScripts(e.p+e.u(n))};var n=self.webpackChunkaoc2021=self.webpackChunkaoc2021||[],r=n.push.bind(n);n.push=function(n){var i=n[0],a=n[1],o=n[2];for(var u in a)e.o(a,u)&&(e.m[u]=a[u]);for(o&&o(e);i.length;)t[i.pop()]=1;r(n)}}(),function(){var t=e.x;e.x=function(){return e.e(480).then(t)}}();e.x()}();
//# sourceMappingURL=20.f4642d68.chunk.js.map